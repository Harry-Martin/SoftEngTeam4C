<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Home</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Home</h1>

    



    


    <h3> </h3>










    




    <section>
        <article><h1>Software Engineering Theory and Practice (Coursework)</h1>
<table>
<thead>
<tr>
<th>GitHub Username</th>
<th>Name</th>
<th>UP Number</th>
</tr>
</thead>
<tbody>
<tr>
<td>Harry-Martin</td>
<td>Harry Martin</td>
<td>UP896106</td>
</tr>
<tr>
<td>psidex</td>
<td>Simon Jenner</td>
<td>UP897821</td>
</tr>
<tr>
<td>Sam200080</td>
<td>Sam Parsons</td>
<td>UP889823</td>
</tr>
<tr>
<td>SammyJC</td>
<td>Sam Clifton</td>
<td>UP880264</td>
</tr>
<tr>
<td>Bancsii</td>
<td>Daniel McKenna</td>
<td>UP846201</td>
</tr>
<tr>
<td>username</td>
<td>name</td>
<td>UPxxxxxx</td>
</tr>
</tbody>
</table>
<h2>Installation / Running</h2>
<ul>
<li><a href="https://www.postgresqltutorial.com/install-postgresql/">Install and run PostgreSQL</a></li>
<li><a href="https://nodejs.org/en/">Install Node.js + NPM</a></li>
<li><code>git clone</code> this repository</li>
<li><code>cd</code> to the <code>SoftEngTeam4C</code> directory that you just cloned</li>
<li>Run the setup file using PostgreSQL:
<ul>
<li><code>psql -f src/setup.sql</code> or equivalent command</li>
</ul>
</li>
<li>Install the required packages:
<ul>
<li><code>npm i</code></li>
</ul>
</li>
<li>Run the server:
<ul>
<li><code>npm start</code></li>
</ul>
</li>
<li>Visit <code>127.0.0.1:8080</code></li>
</ul>
<h2>Docs</h2>
<p>We are using <a href="https://jsdoc.app/">jsdoc</a></p>
<p>Run <code>npm run docgen</code> to regenerate the documentation currently in /docs</p>
<h2>Testing</h2>
<p>We are using <a href="https://jestjs.io/">jest</a> as our jesting framework. Run <code>npm test</code> to run all the tests in <code>/tests</code>.</p>
<h2>Linter</h2>
<p>We are using <a href="https://eslint.org/">eslint</a> for automatic Javascript linting. Run <code>npm run lint</code> to lint.</p>
<h2>Static files</h2>
<p>Any and all files in the <code>SoftEngTeam4C/src/static/</code> directory are served from the route <code>/static</code>, for example the absolute path to <code>main.js</code> would be  <code>127.0.0.1:8080/static/js/main.js</code></p>
<h2>API Routes</h2>
<ul>
<li>This is a <a href="https://restfulapi.net/">REST API</a>.</li>
<li>For all routes except <code>/api/auth</code>, the user must be logged in.</li>
<li>The <code>auth</code> routes require client-side hashing of the password using SHA256. If a <code>password_hash</code> is provided but does not fit the structure of a SHA256 hash, the request will be rejected (SHA256 might be difficult to use client-side, could be easier to switch to something else?).</li>
<li><code>POST</code> requests should have their data sent in the body (shown in the example), <code>GET</code> requests should have their data sent as url parameters, e.g. <code>/api/question?id=69</code>.</li>
<li>ALL API routes will always return JSON, and will always have a <code>success</code> field in the returned body, indicating if the request was successful or not.</li>
</ul>
<table>
<thead>
<tr>
<th>Verb</th>
<th>Path</th>
<th>Parameters</th>
<th>Description</th>
<th>Returns (includes example)</th>
</tr>
</thead>
<tbody>
<tr>
<td>POST</td>
<td><code>/api/auth/login</code></td>
<td><code>{email: &quot;&quot;, password_hash: &quot;&quot;}</code></td>
<td>Log in</td>
<td><code>{success: true\|false}</code></td>
</tr>
<tr>
<td>POST</td>
<td><code>/api/auth/register</code></td>
<td><code>{email: &quot;&quot;, password_hash: &quot;&quot;}</code></td>
<td>Register user</td>
<td><code>{success: true\|false}</code></td>
</tr>
<tr>
<td>POST</td>
<td><code>/api/question</code></td>
<td><code>{text: &quot;&quot;, title: &quot;&quot;}</code></td>
<td>Submit a question</td>
<td>The ID of the newly created question - <code>{success: true, id: 0}</code></td>
</tr>
<tr>
<td>GET</td>
<td><code>/api/question</code></td>
<td><code>?id=0</code></td>
<td>Get a questions details</td>
<td><code>{success: true, text: &quot;&quot;, title: &quot;&quot;, date: &quot;&quot;, user_id: 0}</code></td>
</tr>
<tr>
<td>GET</td>
<td><code>/api/question/answers</code></td>
<td><code>?id=0</code></td>
<td>Get all answers for the given question ID</td>
<td>A field with an array of objects, each containing <code>id</code>, <code>text</code>, <code>score</code>, and <code>user_id</code> - <code>{success: true, answers: [{...}, {...}, etc.]}</code></td>
</tr>
<tr>
<td>POST</td>
<td><code>/api/answer</code></td>
<td><code>{question_id: 0, text: &quot;&quot;}</code></td>
<td>Submit an answer. After submitting you should refresh your answer list using the <code>question/answers</code> route</td>
<td><code>{success: true\|false}</code></td>
</tr>
</tbody>
</table>
<h3>ToDo</h3>
<ul>
<li><code>/api/question/search</code>
<ul>
<li>Getting a list of question ID + titles based on a textual search</li>
<li>Getting a list of question ID + titles based on a date search</li>
</ul>
</li>
</ul>
<h3>Javascript Example</h3>
<pre class="prettyprint source lang-javascript"><code>// Define an asynchronous function as we want to use fetch, which is asynchronous
async function logInUser() {

    // The API route
    const url = &quot;http://127.0.0.1:8080/api/auth/login&quot;;
    
    // The data we want to send
    // Credentials taken from SQL setup file
    const data = {
        email: &quot;test-email@test.ac.uk&quot;,
        password_hash: &quot;5e884898da28047151d0e56f8dc6292773603d0d6aabbdd62a11ef721d1542d8&quot;
    };
    
    // Fetch returns a response object that tells us different things about the response
    const response = await fetch(url, {
        method: 'POST', // Send a POST request
        headers: {'Content-Type': 'application/json'}, // Tell the server we are sending JSON
        body: JSON.stringify(data) // Data type must match &quot;Content-Type&quot; header
    });
    
    // Get the JSON data from the response
    const returned = await response.json();
    
    // Check if it worked
    if (returned[&quot;success&quot;] === true) {
        // You are logged in now
        // At this point you would probably send the user to another page (like a home page)
    } else {
        // Login failed
    }

}
</code></pre></article>
    </section>






</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-api.html">api</a></li><li><a href="module-database.html">database</a></li><li><a href="module-server.html">server</a></li><li><a href="module-utils.html">utils</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.3</a> on Sun Mar 08 2020 00:39:12 GMT+0000 (Greenwich Mean Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>